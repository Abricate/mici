<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2.dev0+g1b644f6.d20200630" />
<title>mici.progressbars API documentation</title>
<meta name="description" content="Progress bar classes for tracking progress of chains." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding-top:5px;padding-bottom:5px;padding-right:10px;padding-left:35px;text-indent:-25px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:1000px){#sidebar{width:540px;position:fixed;z-index:1;top:0;bottom:0;overflow-x:hidden;overflow-y:auto}#content{margin-left:540px;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}#footer{margin-left:540px}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<main>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="mici docs home" href="index.html">
<img width="400" src="../images/mici-logo-rectangular.svg" alt="mici">
</a>
</header>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Package</h3>
<ul>
<li><code><a title="mici" href="index.html">mici</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<code><a title="mici.progressbars.BaseProgressBar" href="#mici.progressbars.BaseProgressBar">BaseProgressBar</a></code>
<ul class="">
<li><code><a title="mici.progressbars.BaseProgressBar.update" href="#mici.progressbars.BaseProgressBar.update">update</a></code></li>
<li><code><a title="mici.progressbars.BaseProgressBar.sequence" href="#mici.progressbars.BaseProgressBar.sequence">sequence</a></code></li>
<li><code><a title="mici.progressbars.BaseProgressBar.n_iter" href="#mici.progressbars.BaseProgressBar.n_iter">n_iter</a></code></li>
</ul>
</li>
<li>
<code><a title="mici.progressbars.DummyProgressBar" href="#mici.progressbars.DummyProgressBar">DummyProgressBar</a></code>
<ul class="">
<li><code><a title="mici.progressbars.DummyProgressBar.update" href="#mici.progressbars.DummyProgressBar.update">update</a></code></li>
<li><code><a title="mici.progressbars.DummyProgressBar.sequence" href="#mici.progressbars.DummyProgressBar.sequence">sequence</a></code></li>
</ul>
</li>
<li>
<code><a title="mici.progressbars.ProgressBar" href="#mici.progressbars.ProgressBar">ProgressBar</a></code>
<details class="source">
<summary>
<span>Expand members</span>
</summary>
<ul class="two-column">
<li><code><a title="mici.progressbars.ProgressBar.reset" href="#mici.progressbars.ProgressBar.reset">reset</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.update" href="#mici.progressbars.ProgressBar.update">update</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.refresh" href="#mici.progressbars.ProgressBar.refresh">refresh</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.description" href="#mici.progressbars.ProgressBar.description">description</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.counter" href="#mici.progressbars.ProgressBar.counter">counter</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.prop_complete" href="#mici.progressbars.ProgressBar.prop_complete">prop_complete</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.perc_complete" href="#mici.progressbars.ProgressBar.perc_complete">perc_complete</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.elapsed_time" href="#mici.progressbars.ProgressBar.elapsed_time">elapsed_time</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.iter_rate" href="#mici.progressbars.ProgressBar.iter_rate">iter_rate</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.est_remaining_time" href="#mici.progressbars.ProgressBar.est_remaining_time">est_remaining_time</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.n_block_filled" href="#mici.progressbars.ProgressBar.n_block_filled">n_block_filled</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.n_block_empty" href="#mici.progressbars.ProgressBar.n_block_empty">n_block_empty</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.prop_partial_block" href="#mici.progressbars.ProgressBar.prop_partial_block">prop_partial_block</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.filled_blocks" href="#mici.progressbars.ProgressBar.filled_blocks">filled_blocks</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.empty_blocks" href="#mici.progressbars.ProgressBar.empty_blocks">empty_blocks</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.partial_block" href="#mici.progressbars.ProgressBar.partial_block">partial_block</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.progress_bar" href="#mici.progressbars.ProgressBar.progress_bar">progress_bar</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.bar_color" href="#mici.progressbars.ProgressBar.bar_color">bar_color</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.stats" href="#mici.progressbars.ProgressBar.stats">stats</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.prefix" href="#mici.progressbars.ProgressBar.prefix">prefix</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.postfix" href="#mici.progressbars.ProgressBar.postfix">postfix</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.sequence" href="#mici.progressbars.ProgressBar.sequence">sequence</a></code></li>
<li><code><a title="mici.progressbars.ProgressBar.GLYPHS" href="#mici.progressbars.ProgressBar.GLYPHS">GLYPHS</a></code></li>
</ul>
</details>
</li>
<li>
<code><a title="mici.progressbars.LabelledSequenceProgressBar" href="#mici.progressbars.LabelledSequenceProgressBar">LabelledSequenceProgressBar</a></code>
<details class="source">
<summary>
<span>Expand members</span>
</summary>
<ul class="two-column">
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.reset" href="#mici.progressbars.LabelledSequenceProgressBar.reset">reset</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.update" href="#mici.progressbars.LabelledSequenceProgressBar.update">update</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.refresh" href="#mici.progressbars.LabelledSequenceProgressBar.refresh">refresh</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.counter" href="#mici.progressbars.LabelledSequenceProgressBar.counter">counter</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.description" href="#mici.progressbars.LabelledSequenceProgressBar.description">description</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.stats" href="#mici.progressbars.LabelledSequenceProgressBar.stats">stats</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.prefix" href="#mici.progressbars.LabelledSequenceProgressBar.prefix">prefix</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.postfix" href="#mici.progressbars.LabelledSequenceProgressBar.postfix">postfix</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.completed_labels" href="#mici.progressbars.LabelledSequenceProgressBar.completed_labels">completed_labels</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.current_label" href="#mici.progressbars.LabelledSequenceProgressBar.current_label">current_label</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.unstarted_labels" href="#mici.progressbars.LabelledSequenceProgressBar.unstarted_labels">unstarted_labels</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.progress_bar" href="#mici.progressbars.LabelledSequenceProgressBar.progress_bar">progress_bar</a></code></li>
<li><code><a title="mici.progressbars.LabelledSequenceProgressBar.sequence" href="#mici.progressbars.LabelledSequenceProgressBar.sequence">sequence</a></code></li>
</ul>
</details>
</li>
<li>
<code><a title="mici.progressbars.FileDisplay" href="#mici.progressbars.FileDisplay">FileDisplay</a></code>
<ul class="">
<li><code><a title="mici.progressbars.FileDisplay.update" href="#mici.progressbars.FileDisplay.update">update</a></code></li>
<li><code><a title="mici.progressbars.FileDisplay.CURSOR_UP" href="#mici.progressbars.FileDisplay.CURSOR_UP">CURSOR_UP</a></code></li>
<li><code><a title="mici.progressbars.FileDisplay.CURSOR_DOWN" href="#mici.progressbars.FileDisplay.CURSOR_DOWN">CURSOR_DOWN</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<article id="content">
<header>
<h1 class="title">Module <code>mici.progressbars</code></h1>
</header>
<section id="section-intro">
<p>Progress bar classes for tracking progress of chains.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L0-L659" class="git-link">Browse git</a>
</summary>
<pre><code class="python">&#34;&#34;&#34;Progress bar classes for tracking progress of chains.&#34;&#34;&#34;

import abc
import html
import sys
from timeit import default_timer as timer

try:
    from IPython import get_ipython
    from IPython.display import display as ipython_display
    IPYTHON_AVAILABLE = True
except ImportError:
    IPYTHON_AVAILABLE = False

try:
    import google.colab
    ON_COLAB = True
except ImportError:
    ON_COLAB = False


def _in_zmq_interactive_shell():
    &#34;&#34;&#34;Check if in interactive ZMQ shell which supports updateable displays&#34;&#34;&#34;
    if not IPYTHON_AVAILABLE:
        return False
    elif ON_COLAB:
        return True
    else:
        try:
            shell = get_ipython().__class__.__name__
            if shell == &#39;ZMQInteractiveShell&#39;:
                return True
            elif shell == &#39;TerminalInteractiveShell&#39;:
                return False
            else:
                return False
        except NameError:
            return False


def _create_display(obj, position):
    &#34;&#34;&#34;Create an updateable display object.

    Args:
        obj (object): Initial object to display.
        position (Tuple[int, int]): Tuple specifying position of display within
            a sequence of displays with first entry corresponding to the
            zero-indexed position and the second entry the total number of
            displays.

    Returns:
        Object with `update` method to update displayed content.
    &#34;&#34;&#34;
    if _in_zmq_interactive_shell():
        return ipython_display(obj, display_id=True)
    else:
        return FileDisplay(position)


def _format_time(total_seconds):
    &#34;&#34;&#34;Format a time interval in seconds as a colon-delimited string [h:]m:s&#34;&#34;&#34;
    total_mins, seconds = divmod(int(total_seconds), 60)
    hours, mins = divmod(total_mins, 60)
    if hours != 0:
        return f&#39;{hours:d}:{mins:02d}:{seconds:02d}&#39;
    else:
        return f&#39;{mins:02d}:{seconds:02d}&#39;


def _update_stats_running_means(iter, means, new_vals):
    &#34;&#34;&#34;Update dictionary of running statistics means with latest values.&#34;&#34;&#34;
    if iter == 1:
        means.update({key: float(val) for key, val in new_vals.items()})
    else:
        for key, val in new_vals.items():
            means[key] += (float(val) - means[key]) / iter


class BaseProgressBar(abc.ABC):
    &#34;&#34;&#34;Base class defining expected interface for progress bars.&#34;&#34;&#34;

    def __init__(self, sequence, description, position=(0, 1)):
        &#34;&#34;&#34;
        Args:
            sequence (Sequence): Sequence to iterate over. Must be iterable AND
                have a defined length such that `len(sequence)` is valid.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
        &#34;&#34;&#34;
        self._sequence = sequence
        self._description = description
        self._position = position
        self._active = False
        self._n_iter = len(sequence)

    @property
    def sequence(self):
        &#34;&#34;&#34;Sequence iterated over.&#34;&#34;&#34;
        return self._sequence

    @sequence.setter
    def sequence(self, value):
        if self._active:
            raise RuntimeError(&#39;Cannot set sequence of active progress bar.&#39;)
        else:
            self._sequence = value
            self._n_iter = len(value)

    @property
    def n_iter(self):
        return self._n_iter

    def __iter__(self):
        for i, val in enumerate(self.sequence):
            iter_dict = {}
            yield val, iter_dict
            self.update(i + 1, iter_dict, refresh=True)

    def __len__(self):
        return self._n_iter

    @abc.abstractmethod
    def update(self, iter_count, iter_dict, refresh=True):
        &#34;&#34;&#34;Update progress bar state.

        Args:
            iter_count (int): New value for iteration counter.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;

    def __enter__(self):
        &#34;&#34;&#34;Set up progress bar and any associated resource.&#34;&#34;&#34;
        self._active = True
        return self

    def __exit__(self, *args):
        &#34;&#34;&#34;Close down progress bar and any associated resources.&#34;&#34;&#34;
        self._active = False
        return False


class DummyProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Placeholder progress bar which does not display progress updates.&#34;&#34;&#34;

    def update(self, iter_count, iter_dict, refresh=True):
        pass


class ProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Iterable object for tracking progress of an iterative task.

    Implements both string and HTML representations to allow richer
    display in interfaces which support HTML output, for example Jupyter
    notebooks or interactive terminals.
    &#34;&#34;&#34;

    GLYPHS = &#39; ▏▎▍▌▋▊▉█&#39;
    &#34;&#34;&#34;Characters used to create string representation of progress bar.&#34;&#34;&#34;

    def __init__(self, sequence, description=None, position=(0, 1),
                 displays=None, n_col=10, unit=&#39;it&#39;, min_refresh_time=0.25):
        &#34;&#34;&#34;
        Args:
            sequence (Sequence): Sequence to iterate over. Must be iterable AND
                have a defined length such that `len(sequence)` is valid.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
            displays (None or List[object]): List of objects to use to display
                visual representation(s) of progress bar. Each object much have
                an `update` method which will be passed a single argument
                corresponding to the current progress bar.
            n_col (int): Number of columns (characters) to use in string
                representation of progress bar.
            unit (str): String describing unit of per-iteration tasks.
            min_referesh_time (float): Minimum time in seconds between each
                refresh of progress bar visual representation.
        &#34;&#34;&#34;
        super().__init__(sequence, description, position)
        self._n_col = n_col
        self._unit = unit
        self._counter = 0
        self._start_time = None
        self._elapsed_time = 0
        self._stats_dict = {}
        self._displays = displays
        self._min_refresh_time = min_refresh_time

    @property
    def description(self):
        &#34;&#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
        return self._description

    @property
    def counter(self):
        &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
        return self._counter

    @counter.setter
    def counter(self, value):
        self._counter = max(0, min(value, self.n_iter))

    @property
    def prop_complete(self):
        &#34;&#34;&#34;Proportion complete (float value in [0, 1]).&#34;&#34;&#34;
        return self.counter / self.n_iter

    @property
    def perc_complete(self):
        &#34;&#34;&#34;Percentage complete formatted as string.&#34;&#34;&#34;
        return f&#39;{int(self.prop_complete * 100):3d}%&#39;

    @property
    def elapsed_time(self):
        &#34;&#34;&#34;Elapsed time formatted as string.&#34;&#34;&#34;
        return _format_time(self._elapsed_time)

    @property
    def iter_rate(self):
        &#34;&#34;&#34;Mean iteration rate if ≥ 1 `it/s` or reciprocal `s/it` as string.&#34;&#34;&#34;
        if self.prop_complete == 0:
            return &#39;?&#39;
        else:
            mean_time = self._elapsed_time / self.counter
            return (
                f&#39;{mean_time:.2f}s/{self._unit}&#39; if mean_time &gt; 1
                else f&#39;{1/mean_time:.2f}{self._unit}/s&#39;)

    @property
    def est_remaining_time(self):
        &#34;&#34;&#34;Estimated remaining time to completion formatted as string.&#34;&#34;&#34;
        if self.prop_complete == 0:
            return &#39;?&#39;
        else:
            return _format_time(
                (1 / self.prop_complete - 1) * self._elapsed_time)

    @property
    def n_block_filled(self):
        &#34;&#34;&#34;Number of filled blocks in progress bar.&#34;&#34;&#34;
        return int(self._n_col * self.prop_complete)

    @property
    def n_block_empty(self):
        &#34;&#34;&#34;Number of empty blocks in progress bar.&#34;&#34;&#34;
        return self._n_col - self.n_block_filled

    @property
    def prop_partial_block(self):
        &#34;&#34;&#34;Proportion filled in partial block in progress bar.&#34;&#34;&#34;
        return self._n_col * self.prop_complete - self.n_block_filled

    @property
    def filled_blocks(self):
        &#34;&#34;&#34;Filled blocks string.&#34;&#34;&#34;
        return self.GLYPHS[-1] * self.n_block_filled

    @property
    def empty_blocks(self):
        &#34;&#34;&#34;Empty blocks string.&#34;&#34;&#34;
        if self.prop_partial_block == 0:
            return self.GLYPHS[0] * self.n_block_empty
        else:
            return self.GLYPHS[0] * (self.n_block_empty - 1)

    @property
    def partial_block(self):
        &#34;&#34;&#34;Partial block character.&#34;&#34;&#34;
        if self.prop_partial_block == 0:
            return &#39;&#39;
        else:
            return self.GLYPHS[int(len(self.GLYPHS) * self.prop_partial_block)]

    @property
    def progress_bar(self):
        &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
        return f&#39;|{self.filled_blocks}{self.partial_block}{self.empty_blocks}|&#39;

    @property
    def bar_color(self):
        &#34;&#34;&#34;CSS color property for HTML progress bar.&#34;&#34;&#34;
        if self.counter == self.n_iter:
            return &#39;var(--jp-success-color1, #4caf50)&#39;
        elif self._active:
            return &#39;var(--jp-brand-color1, #2196f3)&#39;
        else:
            return &#39;var(--jp-error-color1, #f44336)&#39;

    @property
    def stats(self):
        &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
        return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())

    @property
    def prefix(self):
        &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
        return (
            f&#39;{self.description + &#34;: &#34;if self.description else &#34;&#34;}&#39;
            f&#39;{self.perc_complete}&#39;)

    @property
    def postfix(self):
        &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
        return (
            f&#39;{self.counter}/{self.n_iter} &#39;
            f&#39;[{self.elapsed_time}&lt;{self.est_remaining_time}, &#39;
            f&#39;{self.iter_rate}&#39;
            f&#39;{&#34;, &#34; + self.stats if self._stats_dict else &#34;&#34;}]&#39;)

    def reset(self):
        &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
        self._counter = 0
        self._start_time = timer()
        self._last_refresh_time = -float(&#39;inf&#39;)
        self._stats_dict = {}

    def update(self, iter_count, iter_dict=None, refresh=True):
        &#34;&#34;&#34;Update progress bar state

        Args:
            iter_count (int): New value for iteration counter.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;
        if iter_count == 0:
            self.reset()
        else:
            self.counter = iter_count
            if iter_dict is not None:
                _update_stats_running_means(
                    iter_count, self._stats_dict, iter_dict)
            self._elapsed_time = timer() - self._start_time
        if refresh and iter_count == self.n_iter or (
                timer() - self._last_refresh_time &gt; self._min_refresh_time):
            self.refresh()
            self._last_refresh_time = timer()

    def refresh(self):
        &#34;&#34;&#34;Refresh visual display(s) of progress bar.&#34;&#34;&#34;
        for display in self._displays:
            display.update(self)

    def __str__(self):
        return f&#39;{self.prefix}{self.progress_bar}{self.postfix}&#39;

    def __repr__(self):
        return self.__str__()

    def _repr_html_(self):
        return f&#39;&#39;&#39;
        &lt;div style=&#34;line-height: 28px; width: 100%; display: flex;
                    flex-flow: row wrap; align-items: center;
                    position: relative; margin: 2px;&#34;&gt;
          &lt;label style=&#34;margin-right: 8px; flex-shrink: 0;
                        font-size: var(--jp-code-font-size, 13px);
                        font-family: var(--jp-code-font-family, monospace);&#34;&gt;
            {html.escape(self.prefix).replace(&#39; &#39;, &#39;&amp;nbsp;&#39;)}
          &lt;/label&gt;
          &lt;div role=&#34;progressbar&#34; aria-valuenow=&#34;{self.prop_complete}&#34;
               aria-valuemin=&#34;0&#34; aria-valuemax=&#34;1&#34;
               style=&#34;position: relative; flex-grow: 1; align-self: stretch;
                      margin-top: 4px; margin-bottom: 4px;  height: initial;
                      background-color: #eee;&#34;&gt;
            &lt;div style=&#34;background-color: {self.bar_color}; position: absolute;
                        bottom: 0; left: 0; width: {self.perc_complete};
                        height: 100%;&#34;&gt;&lt;/div&gt;
          &lt;/div&gt;
          &lt;div style=&#34;margin-left: 8px; flex-shrink: 0;
                      font-family: var(--jp-code-font-family, monospace);
                      font-size: var(--jp-code-font-size, 13px);&#34;&gt;
            {html.escape(self.postfix)}
          &lt;/div&gt;
        &lt;/div&gt;
        &#39;&#39;&#39;

    def __enter__(self):
        super().__enter__()
        self.reset()
        if self._displays is None:
            self._displays = [_create_display(self, self._position)]
        return self

    def __exit__(self, *args):
        ret_val = super().__exit__()
        if self.counter != self.n_iter:
            self.refresh()
        return ret_val


class LabelledSequenceProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Iterable object for tracking progress of a sequence of labelled tasks.&#34;&#34;&#34;

    def __init__(self, labelled_sequence, description=None, position=(0, 1),
                 displays=None):
        &#34;&#34;&#34;
        Args:
            labelled_sequence (OrderedDict[str, Any]): Ordered dictionary with
                string keys corresponding to labels for stages represented by
                sequence and values the entries in the sequence being iterated
                over.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
            displays (None or List[object]): List of objects to use to display
                visual representation(s) of progress bar. Each object much have
                an `update` method which will be passed a single argument
                corresponding to the current progress bar.
        &#34;&#34;&#34;
        super().__init__(
            list(labelled_sequence.values()), description, position)
        self._labels = list(labelled_sequence.keys())
        self._description = description
        self._position = position
        self._counter = 0
        self._prev_time = None
        self._iter_times = [None] * self.n_iter
        self._stats_dict = {}
        self._displays = displays

    @property
    def counter(self):
        &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
        return self._counter

    @counter.setter
    def counter(self, value):
        self._counter = max(0, min(value, self.n_iter))

    @property
    def description(self):
        &#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
        return self._description

    @property
    def stats(self):
        &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
        return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())

    @property
    def prefix(self):
        &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
        return f&#39;{self.description + &#34;: &#34; if self.description else &#34;&#34;}&#39;

    @property
    def postfix(self):
        &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
        return f&#39; [{self.stats}]&#39; if self._stats_dict else &#39;&#39;

    @property
    def completed_labels(self):
        &#34;&#34;&#34;Labels corresponding to completed iterations.&#34;&#34;&#34;
        return [
            f&#39;{label} [{_format_time(time)}]&#39; for label, time in
            zip(self._labels[:self._counter], self._iter_times[:self._counter])]

    @property
    def current_label(self):
        &#34;&#34;&#34;Label corresponding to current iteration.&#34;&#34;&#34;
        return self._labels[self._counter] if self.counter &lt; self.n_iter else &#39;&#39;

    @property
    def unstarted_labels(self):
        &#34;&#34;&#34;Labels corresponding to unstarted iterations.&#34;&#34;&#34;
        return self._labels[self._counter + 1:]

    @property
    def progress_bar(self):
        &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
        labels = self.completed_labels
        if self.counter &lt; self.n_iter:
            labels.append(self.current_label)
        return &#39; &gt; &#39;.join(labels)

    def reset(self):
        &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
        self._counter = 0
        self._prev_time = timer()
        self._iter_times = [None] * self.n_iter
        self._stats_dict = {}

    def update(self, iter_count, iter_dict=None, refresh=True):
        &#34;&#34;&#34;Update progress bar state

        Args:
            status (string): New value for status string.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;
        if iter_count == 0:
            self.reset()
        else:
            self.counter = iter_count
            if iter_dict is not None:
                _update_stats_running_means(iter, self._stats_dict, iter_dict)
            curr_time = timer()
            self._iter_times[iter_count - 1] = curr_time - self._prev_time
            self._prev_time = curr_time
        if refresh:
            self.refresh()

    def refresh(self):
        &#34;&#34;&#34;Refresh visual display(s) of status bar.&#34;&#34;&#34;
        for display in self._displays:
            display.update(self)

    def __str__(self):
        return f&#39;{self.prefix}{self.progress_bar}{self.postfix}&#39;

    def __repr__(self):
        return self.__str__()

    def _repr_html_(self):
        html_string = f&#39;&#39;&#39;
        &lt;div style=&#34;line-height: 24px; width: 100%; display: flex;
                    flex-flow: row wrap; align-items: center;
                    position: relative; margin: 2px;&#34;&gt;
          &lt;label style=&#34;flex-shrink: 0;
                        font-size: var(--jp-code-font-size, 13px);
                        font-family: var(--jp-code-font-family, monospace);&#34;&gt;
            {html.escape(self.prefix).replace(&#39; &#39;, &#39;&amp;nbsp;&#39;)}
          &lt;/label&gt;
        &#39;&#39;&#39;
        template_string = &#39;&#39;&#39;
          &lt;div style=&#34;position: relative; flex-grow: 1; align-self: stretch;
                      margin: 1px; padding: 0px; text-align: center;
                      height: initial; background-color: {background_color};
                      color: {foreground_color}; border-radius: 5px;
                      border: 1px solid {foreground_color}; font-size: 90%;&#34;&gt;
            {label}
          &lt;/div&gt;
        &#39;&#39;&#39;
        for label in self.completed_labels:
            html_string += template_string.format(
                label=label, foreground_color=&#39;white&#39;,
                background_color=&#39;#4caf50&#39;)
        if self.counter != self.n_iter:
            html_string += template_string.format(
                label=self.current_label, foreground_color=&#39;white&#39;,
                background_color=&#39;#2196f3&#39; if self._active else &#39;#f44336&#39;)
        for label in self.unstarted_labels:
            html_string += template_string.format(
                label=label, foreground_color=&#39;#aaa&#39;, background_color=&#39;white&#39;)
        if self.postfix != &#39;&#39;:
            html_string += f&#39;&#39;&#39;
              &lt;div style=&#34;margin-left: 8px; flex-shrink: 0;
                          font-family: var(--jp-code-font-family, monospace);
                          font-size: var(--jp-code-font-size, 13px);&#34;&gt;
                {html.escape(self.postfix)}
              &lt;/div&gt;
            &#39;&#39;&#39;
        html_string += &#39;&lt;/div&gt;&#39;
        return html_string

    def __enter__(self):
        super().__enter__()
        self.reset()
        if self._displays is None:
            self._displays = [_create_display(self, self._position)]
        self.refresh()
        return self

    def __exit__(self, *args):
        ret_val = super().__exit__()
        if self.counter != self.n_iter:
            self.refresh()
        return ret_val


class FileDisplay:
    &#34;&#34;&#34;Use file which supports ANSI escape sequences as an updatable display&#34;&#34;&#34;

    CURSOR_UP = &#39;\x1b[A&#39;
    &#34;&#34;&#34;ANSI escape sequence to move cursor up one line.&#34;&#34;&#34;

    CURSOR_DOWN = &#39;\x1b[B&#39;
    &#34;&#34;&#34;ANSI escape sequence to move cursor down one line.&#34;&#34;&#34;

    def __init__(self, position=(0, 1), file=None):
        &#34;&#34;&#34;
        Args:
            position (Tuple[int, int]): Tuple specifying position of
                display line within a sequence lines with first entry
                corresponding to zero-indexed line and the second entry
                the total number of lines.
            file (None or File): File object to write updates to. Must support
                ANSI escape sequences `\\x1b[A}` (cursor up) and `\\x1b[B`
                (cursor down) for manipulating write position. Defaults to
                `sys.stdout` if `None`.
        &#34;&#34;&#34;
        self._position = position
        self._file = file if file is not None else sys.stdout
        self._last_string_length = 0
        if self._position[0] == 0:
            self._file.write(&#39;\n&#39; * self._position[1])
        self._file.flush()

    def _move_line(self, offset):
        self._file.write(self.CURSOR_DOWN * offset + self.CURSOR_UP * -offset)
        self._file.flush()

    def update(self, obj):
        self._move_line(self._position[0] - self._position[1])
        string = str(obj)
        self._file.write(f&#39;{string: &lt;{self._last_string_length}}\r&#39;)
        self._last_string_length = len(string)
        self._move_line(self._position[1] - self._position[0])
        self._file.flush()


class _ProxyProgressBar:
    &#34;&#34;&#34;Proxy progress bar that outputs progress updates to a queue.

    Intended for communicating progress updates from a child to parent process
    when distributing tasks across multiple processes.
    &#34;&#34;&#34;

    def __init__(self, sequence, job_id, iter_queue):
        &#34;&#34;&#34;
        Args:
            sequence (Sequence): Sequence to iterate over. Must be iterable AND
                have a defined length such that `len(sequence)` is valid.
            job_id (int): Unique integer identifier for progress bar amongst
                other progress bars sharing same `iter_queue` object.
            iter_queue (Queue): Shared queue object that progress updates are
                pushed to.
        &#34;&#34;&#34;
        self._sequence = sequence
        self._n_iter = len(sequence)
        self._job_id = job_id
        self._iter_queue = iter_queue

    def __len__(self):
        return self._n_iter

    def __enter__(self):
        self._iter_queue.put((self._job_id, 0, None))
        return self

    def __exit__(self, *args):
        return False

    def __iter__(self):
        for i, val in enumerate(self._sequence):
            iter_dict = {}
            yield val, iter_dict
            self._iter_queue.put((self._job_id, i + 1, iter_dict))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="mici.progressbars.BaseProgressBar"><code class="flex name class">
<span>class <span class="ident">BaseProgressBar</span></span>
<span>(</span><span>sequence, description, position=(0, 1))</span>
</code></dt>
<dd>
<section class="desc"><p>Base class defining expected interface for progress bars.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>sequence</code></strong> :&ensp;<code>Sequence</code></dt>
<dd>Sequence to iterate over. Must be iterable AND
have a defined length such that <code>len(sequence)</code> is valid.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>None</code> or <code>str</code></dt>
<dd>Description of task to prefix progress
bar with.</dd>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple</code>[<code>int</code>, <code>int</code>]</dt>
<dd>Tuple specifying position of progress
bar within a sequence with first entry corresponding to
zero-indexed position and the second entry the total number of
progress bars.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L79-L145" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class BaseProgressBar(abc.ABC):
    &#34;&#34;&#34;Base class defining expected interface for progress bars.&#34;&#34;&#34;

    def __init__(self, sequence, description, position=(0, 1)):
        &#34;&#34;&#34;
        Args:
            sequence (Sequence): Sequence to iterate over. Must be iterable AND
                have a defined length such that `len(sequence)` is valid.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
        &#34;&#34;&#34;
        self._sequence = sequence
        self._description = description
        self._position = position
        self._active = False
        self._n_iter = len(sequence)

    @property
    def sequence(self):
        &#34;&#34;&#34;Sequence iterated over.&#34;&#34;&#34;
        return self._sequence

    @sequence.setter
    def sequence(self, value):
        if self._active:
            raise RuntimeError(&#39;Cannot set sequence of active progress bar.&#39;)
        else:
            self._sequence = value
            self._n_iter = len(value)

    @property
    def n_iter(self):
        return self._n_iter

    def __iter__(self):
        for i, val in enumerate(self.sequence):
            iter_dict = {}
            yield val, iter_dict
            self.update(i + 1, iter_dict, refresh=True)

    def __len__(self):
        return self._n_iter

    @abc.abstractmethod
    def update(self, iter_count, iter_dict, refresh=True):
        &#34;&#34;&#34;Update progress bar state.

        Args:
            iter_count (int): New value for iteration counter.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;

    def __enter__(self):
        &#34;&#34;&#34;Set up progress bar and any associated resource.&#34;&#34;&#34;
        self._active = True
        return self

    def __exit__(self, *args):
        &#34;&#34;&#34;Close down progress bar and any associated resources.&#34;&#34;&#34;
        self._active = False
        return False</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="mici.progressbars.DummyProgressBar" href="#mici.progressbars.DummyProgressBar">DummyProgressBar</a></li>
<li><a title="mici.progressbars.ProgressBar" href="#mici.progressbars.ProgressBar">ProgressBar</a></li>
<li><a title="mici.progressbars.LabelledSequenceProgressBar" href="#mici.progressbars.LabelledSequenceProgressBar">LabelledSequenceProgressBar</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="mici.progressbars.BaseProgressBar.sequence"><code class="name">var <span class="ident">sequence</span></code></dt>
<dd>
<section class="desc"><p>Sequence iterated over.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L100-L103" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def sequence(self):
    &#34;&#34;&#34;Sequence iterated over.&#34;&#34;&#34;
    return self._sequence</code></pre>
</details>
</dd>
<dt id="mici.progressbars.BaseProgressBar.n_iter"><code class="name">var <span class="ident">n_iter</span></code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L113-L115" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def n_iter(self):
    return self._n_iter</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mici.progressbars.BaseProgressBar.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, iter_count, iter_dict, refresh=True)</span>
</code></dt>
<dd>
<section class="desc"><p>Update progress bar state.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>iter_count</code></strong> :&ensp;<code>int</code></dt>
<dd>New value for iteration counter.</dd>
<dt><strong><code>iter_dict</code></strong> :&ensp;<code>None</code> or <code>Dict</code>[<code>str</code>, <code>float</code>]</dt>
<dd>Dictionary of iteration
statistics key-value pairs to use to update postfix stats.</dd>
<dt><strong><code>refresh</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to refresh display(s).</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L126-L135" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@abc.abstractmethod
def update(self, iter_count, iter_dict, refresh=True):
    &#34;&#34;&#34;Update progress bar state.

    Args:
        iter_count (int): New value for iteration counter.
        iter_dict (None or Dict[str, float]): Dictionary of iteration
            statistics key-value pairs to use to update postfix stats.
        refresh (bool): Whether to refresh display(s).
    &#34;&#34;&#34;</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mici.progressbars.DummyProgressBar"><code class="flex name class">
<span>class <span class="ident">DummyProgressBar</span></span>
<span>(</span><span>sequence, description, position=(0, 1))</span>
</code></dt>
<dd>
<section class="desc"><p>Placeholder progress bar which does not display progress updates.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>sequence</code></strong> :&ensp;<code>Sequence</code></dt>
<dd>Sequence to iterate over. Must be iterable AND
have a defined length such that <code>len(sequence)</code> is valid.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>None</code> or <code>str</code></dt>
<dd>Description of task to prefix progress
bar with.</dd>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple</code>[<code>int</code>, <code>int</code>]</dt>
<dd>Tuple specifying position of progress
bar within a sequence with first entry corresponding to
zero-indexed position and the second entry the total number of
progress bars.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L148-L152" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class DummyProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Placeholder progress bar which does not display progress updates.&#34;&#34;&#34;

    def update(self, iter_count, iter_dict, refresh=True):
        pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mici.progressbars.BaseProgressBar" href="#mici.progressbars.BaseProgressBar">BaseProgressBar</a></li>
<li>abc.ABC</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="mici.progressbars.DummyProgressBar.sequence"><code class="name">var <span class="ident">sequence</span></code></dt>
<dd>
<section class="desc"><p>Sequence iterated over.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mici.progressbars.DummyProgressBar.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, iter_count, iter_dict, refresh=True)</span>
</code></dt>
<dd>
<section class="desc"><p>Update progress bar state.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>iter_count</code></strong> :&ensp;<code>int</code></dt>
<dd>New value for iteration counter.</dd>
<dt><strong><code>iter_dict</code></strong> :&ensp;<code>None</code> or <code>Dict</code>[<code>str</code>, <code>float</code>]</dt>
<dd>Dictionary of iteration
statistics key-value pairs to use to update postfix stats.</dd>
<dt><strong><code>refresh</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to refresh display(s).</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L151-L152" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def update(self, iter_count, iter_dict, refresh=True):
    pass</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mici.progressbars.ProgressBar"><code class="flex name class">
<span>class <span class="ident">ProgressBar</span></span>
<span>(</span><span>sequence, description=None, position=(0, 1), displays=None, n_col=10, unit='it', min_refresh_time=0.25)</span>
</code></dt>
<dd>
<section class="desc"><p>Iterable object for tracking progress of an iterative task.</p>
<p>Implements both string and HTML representations to allow richer
display in interfaces which support HTML output, for example Jupyter
notebooks or interactive terminals.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>sequence</code></strong> :&ensp;<code>Sequence</code></dt>
<dd>Sequence to iterate over. Must be iterable AND
have a defined length such that <code>len(sequence)</code> is valid.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>None</code> or <code>str</code></dt>
<dd>Description of task to prefix progress
bar with.</dd>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple</code>[<code>int</code>, <code>int</code>]</dt>
<dd>Tuple specifying position of progress
bar within a sequence with first entry corresponding to
zero-indexed position and the second entry the total number of
progress bars.</dd>
<dt><strong><code>displays</code></strong> :&ensp;<code>None</code> or <code>List</code>[<code>object</code>]</dt>
<dd>List of objects to use to display
visual representation(s) of progress bar. Each object much have
an <code>update</code> method which will be passed a single argument
corresponding to the current progress bar.</dd>
<dt><strong><code>n_col</code></strong> :&ensp;<code>int</code></dt>
<dd>Number of columns (characters) to use in string
representation of progress bar.</dd>
<dt><strong><code>unit</code></strong> :&ensp;<code>str</code></dt>
<dd>String describing unit of per-iteration tasks.</dd>
<dt><strong><code>min_referesh_time</code></strong> :&ensp;<code>float</code></dt>
<dd>Minimum time in seconds between each
refresh of progress bar visual representation.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L155-L397" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class ProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Iterable object for tracking progress of an iterative task.

    Implements both string and HTML representations to allow richer
    display in interfaces which support HTML output, for example Jupyter
    notebooks or interactive terminals.
    &#34;&#34;&#34;

    GLYPHS = &#39; ▏▎▍▌▋▊▉█&#39;
    &#34;&#34;&#34;Characters used to create string representation of progress bar.&#34;&#34;&#34;

    def __init__(self, sequence, description=None, position=(0, 1),
                 displays=None, n_col=10, unit=&#39;it&#39;, min_refresh_time=0.25):
        &#34;&#34;&#34;
        Args:
            sequence (Sequence): Sequence to iterate over. Must be iterable AND
                have a defined length such that `len(sequence)` is valid.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
            displays (None or List[object]): List of objects to use to display
                visual representation(s) of progress bar. Each object much have
                an `update` method which will be passed a single argument
                corresponding to the current progress bar.
            n_col (int): Number of columns (characters) to use in string
                representation of progress bar.
            unit (str): String describing unit of per-iteration tasks.
            min_referesh_time (float): Minimum time in seconds between each
                refresh of progress bar visual representation.
        &#34;&#34;&#34;
        super().__init__(sequence, description, position)
        self._n_col = n_col
        self._unit = unit
        self._counter = 0
        self._start_time = None
        self._elapsed_time = 0
        self._stats_dict = {}
        self._displays = displays
        self._min_refresh_time = min_refresh_time

    @property
    def description(self):
        &#34;&#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
        return self._description

    @property
    def counter(self):
        &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
        return self._counter

    @counter.setter
    def counter(self, value):
        self._counter = max(0, min(value, self.n_iter))

    @property
    def prop_complete(self):
        &#34;&#34;&#34;Proportion complete (float value in [0, 1]).&#34;&#34;&#34;
        return self.counter / self.n_iter

    @property
    def perc_complete(self):
        &#34;&#34;&#34;Percentage complete formatted as string.&#34;&#34;&#34;
        return f&#39;{int(self.prop_complete * 100):3d}%&#39;

    @property
    def elapsed_time(self):
        &#34;&#34;&#34;Elapsed time formatted as string.&#34;&#34;&#34;
        return _format_time(self._elapsed_time)

    @property
    def iter_rate(self):
        &#34;&#34;&#34;Mean iteration rate if ≥ 1 `it/s` or reciprocal `s/it` as string.&#34;&#34;&#34;
        if self.prop_complete == 0:
            return &#39;?&#39;
        else:
            mean_time = self._elapsed_time / self.counter
            return (
                f&#39;{mean_time:.2f}s/{self._unit}&#39; if mean_time &gt; 1
                else f&#39;{1/mean_time:.2f}{self._unit}/s&#39;)

    @property
    def est_remaining_time(self):
        &#34;&#34;&#34;Estimated remaining time to completion formatted as string.&#34;&#34;&#34;
        if self.prop_complete == 0:
            return &#39;?&#39;
        else:
            return _format_time(
                (1 / self.prop_complete - 1) * self._elapsed_time)

    @property
    def n_block_filled(self):
        &#34;&#34;&#34;Number of filled blocks in progress bar.&#34;&#34;&#34;
        return int(self._n_col * self.prop_complete)

    @property
    def n_block_empty(self):
        &#34;&#34;&#34;Number of empty blocks in progress bar.&#34;&#34;&#34;
        return self._n_col - self.n_block_filled

    @property
    def prop_partial_block(self):
        &#34;&#34;&#34;Proportion filled in partial block in progress bar.&#34;&#34;&#34;
        return self._n_col * self.prop_complete - self.n_block_filled

    @property
    def filled_blocks(self):
        &#34;&#34;&#34;Filled blocks string.&#34;&#34;&#34;
        return self.GLYPHS[-1] * self.n_block_filled

    @property
    def empty_blocks(self):
        &#34;&#34;&#34;Empty blocks string.&#34;&#34;&#34;
        if self.prop_partial_block == 0:
            return self.GLYPHS[0] * self.n_block_empty
        else:
            return self.GLYPHS[0] * (self.n_block_empty - 1)

    @property
    def partial_block(self):
        &#34;&#34;&#34;Partial block character.&#34;&#34;&#34;
        if self.prop_partial_block == 0:
            return &#39;&#39;
        else:
            return self.GLYPHS[int(len(self.GLYPHS) * self.prop_partial_block)]

    @property
    def progress_bar(self):
        &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
        return f&#39;|{self.filled_blocks}{self.partial_block}{self.empty_blocks}|&#39;

    @property
    def bar_color(self):
        &#34;&#34;&#34;CSS color property for HTML progress bar.&#34;&#34;&#34;
        if self.counter == self.n_iter:
            return &#39;var(--jp-success-color1, #4caf50)&#39;
        elif self._active:
            return &#39;var(--jp-brand-color1, #2196f3)&#39;
        else:
            return &#39;var(--jp-error-color1, #f44336)&#39;

    @property
    def stats(self):
        &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
        return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())

    @property
    def prefix(self):
        &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
        return (
            f&#39;{self.description + &#34;: &#34;if self.description else &#34;&#34;}&#39;
            f&#39;{self.perc_complete}&#39;)

    @property
    def postfix(self):
        &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
        return (
            f&#39;{self.counter}/{self.n_iter} &#39;
            f&#39;[{self.elapsed_time}&lt;{self.est_remaining_time}, &#39;
            f&#39;{self.iter_rate}&#39;
            f&#39;{&#34;, &#34; + self.stats if self._stats_dict else &#34;&#34;}]&#39;)

    def reset(self):
        &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
        self._counter = 0
        self._start_time = timer()
        self._last_refresh_time = -float(&#39;inf&#39;)
        self._stats_dict = {}

    def update(self, iter_count, iter_dict=None, refresh=True):
        &#34;&#34;&#34;Update progress bar state

        Args:
            iter_count (int): New value for iteration counter.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;
        if iter_count == 0:
            self.reset()
        else:
            self.counter = iter_count
            if iter_dict is not None:
                _update_stats_running_means(
                    iter_count, self._stats_dict, iter_dict)
            self._elapsed_time = timer() - self._start_time
        if refresh and iter_count == self.n_iter or (
                timer() - self._last_refresh_time &gt; self._min_refresh_time):
            self.refresh()
            self._last_refresh_time = timer()

    def refresh(self):
        &#34;&#34;&#34;Refresh visual display(s) of progress bar.&#34;&#34;&#34;
        for display in self._displays:
            display.update(self)

    def __str__(self):
        return f&#39;{self.prefix}{self.progress_bar}{self.postfix}&#39;

    def __repr__(self):
        return self.__str__()

    def _repr_html_(self):
        return f&#39;&#39;&#39;
        &lt;div style=&#34;line-height: 28px; width: 100%; display: flex;
                    flex-flow: row wrap; align-items: center;
                    position: relative; margin: 2px;&#34;&gt;
          &lt;label style=&#34;margin-right: 8px; flex-shrink: 0;
                        font-size: var(--jp-code-font-size, 13px);
                        font-family: var(--jp-code-font-family, monospace);&#34;&gt;
            {html.escape(self.prefix).replace(&#39; &#39;, &#39;&amp;nbsp;&#39;)}
          &lt;/label&gt;
          &lt;div role=&#34;progressbar&#34; aria-valuenow=&#34;{self.prop_complete}&#34;
               aria-valuemin=&#34;0&#34; aria-valuemax=&#34;1&#34;
               style=&#34;position: relative; flex-grow: 1; align-self: stretch;
                      margin-top: 4px; margin-bottom: 4px;  height: initial;
                      background-color: #eee;&#34;&gt;
            &lt;div style=&#34;background-color: {self.bar_color}; position: absolute;
                        bottom: 0; left: 0; width: {self.perc_complete};
                        height: 100%;&#34;&gt;&lt;/div&gt;
          &lt;/div&gt;
          &lt;div style=&#34;margin-left: 8px; flex-shrink: 0;
                      font-family: var(--jp-code-font-family, monospace);
                      font-size: var(--jp-code-font-size, 13px);&#34;&gt;
            {html.escape(self.postfix)}
          &lt;/div&gt;
        &lt;/div&gt;
        &#39;&#39;&#39;

    def __enter__(self):
        super().__enter__()
        self.reset()
        if self._displays is None:
            self._displays = [_create_display(self, self._position)]
        return self

    def __exit__(self, *args):
        ret_val = super().__exit__()
        if self.counter != self.n_iter:
            self.refresh()
        return ret_val</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mici.progressbars.BaseProgressBar" href="#mici.progressbars.BaseProgressBar">BaseProgressBar</a></li>
<li>abc.ABC</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="mici.progressbars.ProgressBar.GLYPHS"><code class="name">var <span class="ident">GLYPHS</span></code></dt>
<dd>
<section class="desc"><p>Characters used to create string representation of progress bar.</p></section>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="mici.progressbars.ProgressBar.description"><code class="name">var <span class="ident">description</span></code></dt>
<dd>
<section class="desc"><p>"Description of task being tracked.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L198-L201" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def description(self):
    &#34;&#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
    return self._description</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.counter"><code class="name">var <span class="ident">counter</span></code></dt>
<dd>
<section class="desc"><p>Progress iteration count.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L203-L206" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def counter(self):
    &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
    return self._counter</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.prop_complete"><code class="name">var <span class="ident">prop_complete</span></code></dt>
<dd>
<section class="desc"><p>Proportion complete (float value in [0, 1]).</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L212-L215" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def prop_complete(self):
    &#34;&#34;&#34;Proportion complete (float value in [0, 1]).&#34;&#34;&#34;
    return self.counter / self.n_iter</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.perc_complete"><code class="name">var <span class="ident">perc_complete</span></code></dt>
<dd>
<section class="desc"><p>Percentage complete formatted as string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L217-L220" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def perc_complete(self):
    &#34;&#34;&#34;Percentage complete formatted as string.&#34;&#34;&#34;
    return f&#39;{int(self.prop_complete * 100):3d}%&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.elapsed_time"><code class="name">var <span class="ident">elapsed_time</span></code></dt>
<dd>
<section class="desc"><p>Elapsed time formatted as string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L222-L225" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def elapsed_time(self):
    &#34;&#34;&#34;Elapsed time formatted as string.&#34;&#34;&#34;
    return _format_time(self._elapsed_time)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.iter_rate"><code class="name">var <span class="ident">iter_rate</span></code></dt>
<dd>
<section class="desc"><p>Mean iteration rate if ≥ 1 <code>it/s</code> or reciprocal <code>s/it</code> as string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L227-L236" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def iter_rate(self):
    &#34;&#34;&#34;Mean iteration rate if ≥ 1 `it/s` or reciprocal `s/it` as string.&#34;&#34;&#34;
    if self.prop_complete == 0:
        return &#39;?&#39;
    else:
        mean_time = self._elapsed_time / self.counter
        return (
            f&#39;{mean_time:.2f}s/{self._unit}&#39; if mean_time &gt; 1
            else f&#39;{1/mean_time:.2f}{self._unit}/s&#39;)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.est_remaining_time"><code class="name">var <span class="ident">est_remaining_time</span></code></dt>
<dd>
<section class="desc"><p>Estimated remaining time to completion formatted as string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L238-L245" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def est_remaining_time(self):
    &#34;&#34;&#34;Estimated remaining time to completion formatted as string.&#34;&#34;&#34;
    if self.prop_complete == 0:
        return &#39;?&#39;
    else:
        return _format_time(
            (1 / self.prop_complete - 1) * self._elapsed_time)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.n_block_filled"><code class="name">var <span class="ident">n_block_filled</span></code></dt>
<dd>
<section class="desc"><p>Number of filled blocks in progress bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L247-L250" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def n_block_filled(self):
    &#34;&#34;&#34;Number of filled blocks in progress bar.&#34;&#34;&#34;
    return int(self._n_col * self.prop_complete)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.n_block_empty"><code class="name">var <span class="ident">n_block_empty</span></code></dt>
<dd>
<section class="desc"><p>Number of empty blocks in progress bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L252-L255" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def n_block_empty(self):
    &#34;&#34;&#34;Number of empty blocks in progress bar.&#34;&#34;&#34;
    return self._n_col - self.n_block_filled</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.prop_partial_block"><code class="name">var <span class="ident">prop_partial_block</span></code></dt>
<dd>
<section class="desc"><p>Proportion filled in partial block in progress bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L257-L260" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def prop_partial_block(self):
    &#34;&#34;&#34;Proportion filled in partial block in progress bar.&#34;&#34;&#34;
    return self._n_col * self.prop_complete - self.n_block_filled</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.filled_blocks"><code class="name">var <span class="ident">filled_blocks</span></code></dt>
<dd>
<section class="desc"><p>Filled blocks string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L262-L265" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def filled_blocks(self):
    &#34;&#34;&#34;Filled blocks string.&#34;&#34;&#34;
    return self.GLYPHS[-1] * self.n_block_filled</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.empty_blocks"><code class="name">var <span class="ident">empty_blocks</span></code></dt>
<dd>
<section class="desc"><p>Empty blocks string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L267-L273" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def empty_blocks(self):
    &#34;&#34;&#34;Empty blocks string.&#34;&#34;&#34;
    if self.prop_partial_block == 0:
        return self.GLYPHS[0] * self.n_block_empty
    else:
        return self.GLYPHS[0] * (self.n_block_empty - 1)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.partial_block"><code class="name">var <span class="ident">partial_block</span></code></dt>
<dd>
<section class="desc"><p>Partial block character.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L275-L281" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def partial_block(self):
    &#34;&#34;&#34;Partial block character.&#34;&#34;&#34;
    if self.prop_partial_block == 0:
        return &#39;&#39;
    else:
        return self.GLYPHS[int(len(self.GLYPHS) * self.prop_partial_block)]</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.progress_bar"><code class="name">var <span class="ident">progress_bar</span></code></dt>
<dd>
<section class="desc"><p>Progress bar string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L283-L286" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def progress_bar(self):
    &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
    return f&#39;|{self.filled_blocks}{self.partial_block}{self.empty_blocks}|&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.bar_color"><code class="name">var <span class="ident">bar_color</span></code></dt>
<dd>
<section class="desc"><p>CSS color property for HTML progress bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L288-L296" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def bar_color(self):
    &#34;&#34;&#34;CSS color property for HTML progress bar.&#34;&#34;&#34;
    if self.counter == self.n_iter:
        return &#39;var(--jp-success-color1, #4caf50)&#39;
    elif self._active:
        return &#39;var(--jp-brand-color1, #2196f3)&#39;
    else:
        return &#39;var(--jp-error-color1, #f44336)&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.stats"><code class="name">var <span class="ident">stats</span></code></dt>
<dd>
<section class="desc"><p>Comma-delimited string list of statistic key=value pairs.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L298-L301" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def stats(self):
    &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
    return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.prefix"><code class="name">var <span class="ident">prefix</span></code></dt>
<dd>
<section class="desc"><p>Text to prefix progress bar with.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L303-L308" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def prefix(self):
    &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
    return (
        f&#39;{self.description + &#34;: &#34;if self.description else &#34;&#34;}&#39;
        f&#39;{self.perc_complete}&#39;)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.postfix"><code class="name">var <span class="ident">postfix</span></code></dt>
<dd>
<section class="desc"><p>Text to postfix progress bar with.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L310-L317" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def postfix(self):
    &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
    return (
        f&#39;{self.counter}/{self.n_iter} &#39;
        f&#39;[{self.elapsed_time}&lt;{self.est_remaining_time}, &#39;
        f&#39;{self.iter_rate}&#39;
        f&#39;{&#34;, &#34; + self.stats if self._stats_dict else &#34;&#34;}]&#39;)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.sequence"><code class="name">var <span class="ident">sequence</span></code></dt>
<dd>
<section class="desc"><p>Sequence iterated over.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mici.progressbars.ProgressBar.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Reset progress bar state.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L319-L324" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def reset(self):
    &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
    self._counter = 0
    self._start_time = timer()
    self._last_refresh_time = -float(&#39;inf&#39;)
    self._stats_dict = {}</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, iter_count, iter_dict=None, refresh=True)</span>
</code></dt>
<dd>
<section class="desc"><p>Update progress bar state</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>iter_count</code></strong> :&ensp;<code>int</code></dt>
<dd>New value for iteration counter.</dd>
<dt><strong><code>iter_dict</code></strong> :&ensp;<code>None</code> or <code>Dict</code>[<code>str</code>, <code>float</code>]</dt>
<dd>Dictionary of iteration
statistics key-value pairs to use to update postfix stats.</dd>
<dt><strong><code>refresh</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to refresh display(s).</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L326-L346" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def update(self, iter_count, iter_dict=None, refresh=True):
    &#34;&#34;&#34;Update progress bar state

    Args:
        iter_count (int): New value for iteration counter.
        iter_dict (None or Dict[str, float]): Dictionary of iteration
            statistics key-value pairs to use to update postfix stats.
        refresh (bool): Whether to refresh display(s).
    &#34;&#34;&#34;
    if iter_count == 0:
        self.reset()
    else:
        self.counter = iter_count
        if iter_dict is not None:
            _update_stats_running_means(
                iter_count, self._stats_dict, iter_dict)
        self._elapsed_time = timer() - self._start_time
    if refresh and iter_count == self.n_iter or (
            timer() - self._last_refresh_time &gt; self._min_refresh_time):
        self.refresh()
        self._last_refresh_time = timer()</code></pre>
</details>
</dd>
<dt id="mici.progressbars.ProgressBar.refresh"><code class="name flex">
<span>def <span class="ident">refresh</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Refresh visual display(s) of progress bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L348-L351" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def refresh(self):
    &#34;&#34;&#34;Refresh visual display(s) of progress bar.&#34;&#34;&#34;
    for display in self._displays:
        display.update(self)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar"><code class="flex name class">
<span>class <span class="ident">LabelledSequenceProgressBar</span></span>
<span>(</span><span>labelled_sequence, description=None, position=(0, 1), displays=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Iterable object for tracking progress of a sequence of labelled tasks.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>labelled_sequence</code></strong> :&ensp;<code>OrderedDict</code>[<code>str</code>, <code>Any</code>]</dt>
<dd>Ordered dictionary with
string keys corresponding to labels for stages represented by
sequence and values the entries in the sequence being iterated
over.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>None</code> or <code>str</code></dt>
<dd>Description of task to prefix progress
bar with.</dd>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple</code>[<code>int</code>, <code>int</code>]</dt>
<dd>Tuple specifying position of progress
bar within a sequence with first entry corresponding to
zero-indexed position and the second entry the total number of
progress bars.</dd>
<dt><strong><code>displays</code></strong> :&ensp;<code>None</code> or <code>List</code>[<code>object</code>]</dt>
<dd>List of objects to use to display
visual representation(s) of progress bar. Each object much have
an <code>update</code> method which will be passed a single argument
corresponding to the current progress bar.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L400-L580" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class LabelledSequenceProgressBar(BaseProgressBar):
    &#34;&#34;&#34;Iterable object for tracking progress of a sequence of labelled tasks.&#34;&#34;&#34;

    def __init__(self, labelled_sequence, description=None, position=(0, 1),
                 displays=None):
        &#34;&#34;&#34;
        Args:
            labelled_sequence (OrderedDict[str, Any]): Ordered dictionary with
                string keys corresponding to labels for stages represented by
                sequence and values the entries in the sequence being iterated
                over.
            description (None or str): Description of task to prefix progress
                bar with.
            position (Tuple[int, int]): Tuple specifying position of progress
                bar within a sequence with first entry corresponding to
                zero-indexed position and the second entry the total number of
                progress bars.
            displays (None or List[object]): List of objects to use to display
                visual representation(s) of progress bar. Each object much have
                an `update` method which will be passed a single argument
                corresponding to the current progress bar.
        &#34;&#34;&#34;
        super().__init__(
            list(labelled_sequence.values()), description, position)
        self._labels = list(labelled_sequence.keys())
        self._description = description
        self._position = position
        self._counter = 0
        self._prev_time = None
        self._iter_times = [None] * self.n_iter
        self._stats_dict = {}
        self._displays = displays

    @property
    def counter(self):
        &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
        return self._counter

    @counter.setter
    def counter(self, value):
        self._counter = max(0, min(value, self.n_iter))

    @property
    def description(self):
        &#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
        return self._description

    @property
    def stats(self):
        &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
        return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())

    @property
    def prefix(self):
        &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
        return f&#39;{self.description + &#34;: &#34; if self.description else &#34;&#34;}&#39;

    @property
    def postfix(self):
        &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
        return f&#39; [{self.stats}]&#39; if self._stats_dict else &#39;&#39;

    @property
    def completed_labels(self):
        &#34;&#34;&#34;Labels corresponding to completed iterations.&#34;&#34;&#34;
        return [
            f&#39;{label} [{_format_time(time)}]&#39; for label, time in
            zip(self._labels[:self._counter], self._iter_times[:self._counter])]

    @property
    def current_label(self):
        &#34;&#34;&#34;Label corresponding to current iteration.&#34;&#34;&#34;
        return self._labels[self._counter] if self.counter &lt; self.n_iter else &#39;&#39;

    @property
    def unstarted_labels(self):
        &#34;&#34;&#34;Labels corresponding to unstarted iterations.&#34;&#34;&#34;
        return self._labels[self._counter + 1:]

    @property
    def progress_bar(self):
        &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
        labels = self.completed_labels
        if self.counter &lt; self.n_iter:
            labels.append(self.current_label)
        return &#39; &gt; &#39;.join(labels)

    def reset(self):
        &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
        self._counter = 0
        self._prev_time = timer()
        self._iter_times = [None] * self.n_iter
        self._stats_dict = {}

    def update(self, iter_count, iter_dict=None, refresh=True):
        &#34;&#34;&#34;Update progress bar state

        Args:
            status (string): New value for status string.
            iter_dict (None or Dict[str, float]): Dictionary of iteration
                statistics key-value pairs to use to update postfix stats.
            refresh (bool): Whether to refresh display(s).
        &#34;&#34;&#34;
        if iter_count == 0:
            self.reset()
        else:
            self.counter = iter_count
            if iter_dict is not None:
                _update_stats_running_means(iter, self._stats_dict, iter_dict)
            curr_time = timer()
            self._iter_times[iter_count - 1] = curr_time - self._prev_time
            self._prev_time = curr_time
        if refresh:
            self.refresh()

    def refresh(self):
        &#34;&#34;&#34;Refresh visual display(s) of status bar.&#34;&#34;&#34;
        for display in self._displays:
            display.update(self)

    def __str__(self):
        return f&#39;{self.prefix}{self.progress_bar}{self.postfix}&#39;

    def __repr__(self):
        return self.__str__()

    def _repr_html_(self):
        html_string = f&#39;&#39;&#39;
        &lt;div style=&#34;line-height: 24px; width: 100%; display: flex;
                    flex-flow: row wrap; align-items: center;
                    position: relative; margin: 2px;&#34;&gt;
          &lt;label style=&#34;flex-shrink: 0;
                        font-size: var(--jp-code-font-size, 13px);
                        font-family: var(--jp-code-font-family, monospace);&#34;&gt;
            {html.escape(self.prefix).replace(&#39; &#39;, &#39;&amp;nbsp;&#39;)}
          &lt;/label&gt;
        &#39;&#39;&#39;
        template_string = &#39;&#39;&#39;
          &lt;div style=&#34;position: relative; flex-grow: 1; align-self: stretch;
                      margin: 1px; padding: 0px; text-align: center;
                      height: initial; background-color: {background_color};
                      color: {foreground_color}; border-radius: 5px;
                      border: 1px solid {foreground_color}; font-size: 90%;&#34;&gt;
            {label}
          &lt;/div&gt;
        &#39;&#39;&#39;
        for label in self.completed_labels:
            html_string += template_string.format(
                label=label, foreground_color=&#39;white&#39;,
                background_color=&#39;#4caf50&#39;)
        if self.counter != self.n_iter:
            html_string += template_string.format(
                label=self.current_label, foreground_color=&#39;white&#39;,
                background_color=&#39;#2196f3&#39; if self._active else &#39;#f44336&#39;)
        for label in self.unstarted_labels:
            html_string += template_string.format(
                label=label, foreground_color=&#39;#aaa&#39;, background_color=&#39;white&#39;)
        if self.postfix != &#39;&#39;:
            html_string += f&#39;&#39;&#39;
              &lt;div style=&#34;margin-left: 8px; flex-shrink: 0;
                          font-family: var(--jp-code-font-family, monospace);
                          font-size: var(--jp-code-font-size, 13px);&#34;&gt;
                {html.escape(self.postfix)}
              &lt;/div&gt;
            &#39;&#39;&#39;
        html_string += &#39;&lt;/div&gt;&#39;
        return html_string

    def __enter__(self):
        super().__enter__()
        self.reset()
        if self._displays is None:
            self._displays = [_create_display(self, self._position)]
        self.refresh()
        return self

    def __exit__(self, *args):
        ret_val = super().__exit__()
        if self.counter != self.n_iter:
            self.refresh()
        return ret_val</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="mici.progressbars.BaseProgressBar" href="#mici.progressbars.BaseProgressBar">BaseProgressBar</a></li>
<li>abc.ABC</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="mici.progressbars.LabelledSequenceProgressBar.counter"><code class="name">var <span class="ident">counter</span></code></dt>
<dd>
<section class="desc"><p>Progress iteration count.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L433-L436" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def counter(self):
    &#34;&#34;&#34;Progress iteration count.&#34;&#34;&#34;
    return self._counter</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.description"><code class="name">var <span class="ident">description</span></code></dt>
<dd>
<section class="desc"><p>Description of task being tracked.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L442-L445" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def description(self):
    &#34;&#34;&#34;Description of task being tracked.&#34;&#34;&#34;
    return self._description</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.stats"><code class="name">var <span class="ident">stats</span></code></dt>
<dd>
<section class="desc"><p>Comma-delimited string list of statistic key=value pairs.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L447-L450" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def stats(self):
    &#34;&#34;&#34;Comma-delimited string list of statistic key=value pairs.&#34;&#34;&#34;
    return &#39;, &#39;.join(f&#39;{k}={v:#.3g}&#39; for k, v in self._stats_dict.items())</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.prefix"><code class="name">var <span class="ident">prefix</span></code></dt>
<dd>
<section class="desc"><p>Text to prefix progress bar with.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L452-L455" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def prefix(self):
    &#34;&#34;&#34;Text to prefix progress bar with.&#34;&#34;&#34;
    return f&#39;{self.description + &#34;: &#34; if self.description else &#34;&#34;}&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.postfix"><code class="name">var <span class="ident">postfix</span></code></dt>
<dd>
<section class="desc"><p>Text to postfix progress bar with.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L457-L460" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def postfix(self):
    &#34;&#34;&#34;Text to postfix progress bar with.&#34;&#34;&#34;
    return f&#39; [{self.stats}]&#39; if self._stats_dict else &#39;&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.completed_labels"><code class="name">var <span class="ident">completed_labels</span></code></dt>
<dd>
<section class="desc"><p>Labels corresponding to completed iterations.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L462-L467" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def completed_labels(self):
    &#34;&#34;&#34;Labels corresponding to completed iterations.&#34;&#34;&#34;
    return [
        f&#39;{label} [{_format_time(time)}]&#39; for label, time in
        zip(self._labels[:self._counter], self._iter_times[:self._counter])]</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.current_label"><code class="name">var <span class="ident">current_label</span></code></dt>
<dd>
<section class="desc"><p>Label corresponding to current iteration.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L469-L472" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def current_label(self):
    &#34;&#34;&#34;Label corresponding to current iteration.&#34;&#34;&#34;
    return self._labels[self._counter] if self.counter &lt; self.n_iter else &#39;&#39;</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.unstarted_labels"><code class="name">var <span class="ident">unstarted_labels</span></code></dt>
<dd>
<section class="desc"><p>Labels corresponding to unstarted iterations.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L474-L477" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def unstarted_labels(self):
    &#34;&#34;&#34;Labels corresponding to unstarted iterations.&#34;&#34;&#34;
    return self._labels[self._counter + 1:]</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.progress_bar"><code class="name">var <span class="ident">progress_bar</span></code></dt>
<dd>
<section class="desc"><p>Progress bar string.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L479-L485" class="git-link">Browse git</a>
</summary>
<pre><code class="python">@property
def progress_bar(self):
    &#34;&#34;&#34;Progress bar string.&#34;&#34;&#34;
    labels = self.completed_labels
    if self.counter &lt; self.n_iter:
        labels.append(self.current_label)
    return &#39; &gt; &#39;.join(labels)</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.sequence"><code class="name">var <span class="ident">sequence</span></code></dt>
<dd>
<section class="desc"><p>Sequence iterated over.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mici.progressbars.LabelledSequenceProgressBar.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Reset progress bar state.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L487-L492" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def reset(self):
    &#34;&#34;&#34;Reset progress bar state.&#34;&#34;&#34;
    self._counter = 0
    self._prev_time = timer()
    self._iter_times = [None] * self.n_iter
    self._stats_dict = {}</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, iter_count, iter_dict=None, refresh=True)</span>
</code></dt>
<dd>
<section class="desc"><p>Update progress bar state</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>status</code></strong> :&ensp;<code>string</code></dt>
<dd>New value for status string.</dd>
<dt><strong><code>iter_dict</code></strong> :&ensp;<code>None</code> or <code>Dict</code>[<code>str</code>, <code>float</code>]</dt>
<dd>Dictionary of iteration
statistics key-value pairs to use to update postfix stats.</dd>
<dt><strong><code>refresh</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to refresh display(s).</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L494-L513" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def update(self, iter_count, iter_dict=None, refresh=True):
    &#34;&#34;&#34;Update progress bar state

    Args:
        status (string): New value for status string.
        iter_dict (None or Dict[str, float]): Dictionary of iteration
            statistics key-value pairs to use to update postfix stats.
        refresh (bool): Whether to refresh display(s).
    &#34;&#34;&#34;
    if iter_count == 0:
        self.reset()
    else:
        self.counter = iter_count
        if iter_dict is not None:
            _update_stats_running_means(iter, self._stats_dict, iter_dict)
        curr_time = timer()
        self._iter_times[iter_count - 1] = curr_time - self._prev_time
        self._prev_time = curr_time
    if refresh:
        self.refresh()</code></pre>
</details>
</dd>
<dt id="mici.progressbars.LabelledSequenceProgressBar.refresh"><code class="name flex">
<span>def <span class="ident">refresh</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Refresh visual display(s) of status bar.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L515-L518" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def refresh(self):
    &#34;&#34;&#34;Refresh visual display(s) of status bar.&#34;&#34;&#34;
    for display in self._displays:
        display.update(self)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="mici.progressbars.FileDisplay"><code class="flex name class">
<span>class <span class="ident">FileDisplay</span></span>
<span>(</span><span>position=(0, 1), file=None)</span>
</code></dt>
<dd>
<section class="desc"><p>Use file which supports ANSI escape sequences as an updatable display</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>position</code></strong> :&ensp;<code>Tuple</code>[<code>int</code>, <code>int</code>]</dt>
<dd>Tuple specifying position of
display line within a sequence lines with first entry
corresponding to zero-indexed line and the second entry
the total number of lines.</dd>
<dt><strong><code>file</code></strong> :&ensp;<code>None</code> or <code>File</code></dt>
<dd>File object to write updates to. Must support
ANSI escape sequences <code>\x1b[A}</code> (cursor up) and <code>\x1b[B</code>
(cursor down) for manipulating write position. Defaults to
<code>sys.stdout</code> if <code>None</code>.</dd>
</dl></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L583-L621" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class FileDisplay:
    &#34;&#34;&#34;Use file which supports ANSI escape sequences as an updatable display&#34;&#34;&#34;

    CURSOR_UP = &#39;\x1b[A&#39;
    &#34;&#34;&#34;ANSI escape sequence to move cursor up one line.&#34;&#34;&#34;

    CURSOR_DOWN = &#39;\x1b[B&#39;
    &#34;&#34;&#34;ANSI escape sequence to move cursor down one line.&#34;&#34;&#34;

    def __init__(self, position=(0, 1), file=None):
        &#34;&#34;&#34;
        Args:
            position (Tuple[int, int]): Tuple specifying position of
                display line within a sequence lines with first entry
                corresponding to zero-indexed line and the second entry
                the total number of lines.
            file (None or File): File object to write updates to. Must support
                ANSI escape sequences `\\x1b[A}` (cursor up) and `\\x1b[B`
                (cursor down) for manipulating write position. Defaults to
                `sys.stdout` if `None`.
        &#34;&#34;&#34;
        self._position = position
        self._file = file if file is not None else sys.stdout
        self._last_string_length = 0
        if self._position[0] == 0:
            self._file.write(&#39;\n&#39; * self._position[1])
        self._file.flush()

    def _move_line(self, offset):
        self._file.write(self.CURSOR_DOWN * offset + self.CURSOR_UP * -offset)
        self._file.flush()

    def update(self, obj):
        self._move_line(self._position[0] - self._position[1])
        string = str(obj)
        self._file.write(f&#39;{string: &lt;{self._last_string_length}}\r&#39;)
        self._last_string_length = len(string)
        self._move_line(self._position[1] - self._position[0])
        self._file.flush()</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="mici.progressbars.FileDisplay.CURSOR_UP"><code class="name">var <span class="ident">CURSOR_UP</span></code></dt>
<dd>
<section class="desc"><p>ANSI escape sequence to move cursor up one line.</p></section>
</dd>
<dt id="mici.progressbars.FileDisplay.CURSOR_DOWN"><code class="name">var <span class="ident">CURSOR_DOWN</span></code></dt>
<dd>
<section class="desc"><p>ANSI escape sequence to move cursor down one line.</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="mici.progressbars.FileDisplay.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, obj)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/matt-graham/mici/blob/056095624298b0e017652794677e9ba43f7f5ed8/mici/progressbars.py#L615-L621" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def update(self, obj):
    self._move_line(self._position[0] - self._position[1])
    string = str(obj)
    self._file.write(f&#39;{string: &lt;{self._last_string_length}}\r&#39;)
    self._last_string_length = len(string)
    self._move_line(self._position[1] - self._position[0])
    self._file.flush()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
</main>
<footer id="footer">
Copyright © 2019 Matt Graham
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2.dev0+g1b644f6.d20200630</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad(); hljs.configure({languages: ["python"]});</script>
</body>
</html>